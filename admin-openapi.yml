openapi: 3.0.3
info:
  title: Dua Insan Story API - Admin
  description: Dokumentasi API lengkap untuk alur kerja sisi admin, termasuk manajemen produk, varian, pengguna, dan lainnya.
  version: 1.1.0
servers:
  - url: http://127.0.0.1:8000/api/v1
    description: Server Pengembangan Lokal

tags:
  - name: Admin - Pengguna
    description: Mengelola akun administrator.
  - name: Admin - Galeri
    description: Mengelola item galeri (gambar & video).
  - name: Admin - Kategori Produk
    description: Mengelola kategori produk.
  - name: Admin - Produk
    description: Mengelola produk dasar.
  - name: Admin - Varian Produk
    description: Mengelola varian (kombinasi opsi) untuk setiap produk.
  - name: Admin - Gambar Varian
    description: Mengelola gambar untuk setiap varian produk.
  - name: Admin - Item Tambahan
    description: Mengelola item tambahan (Add-ons).
  - name: Admin - Atribut
    description: Mengelola atribut (e.g., Ukuran, Warna).
  - name: Admin - Nilai Atribut
    description: Mengelola nilai atribut (e.g., Kecil, Merah).
  - name: Admin - Tautan Item Tambahan
    description: Menautkan item tambahan ke produk.

# ===============================================================
# PATHS (DEFINISI ENDPOINT)
# ===============================================================
paths:
  # ------------------ ADMIN: PENGGUNA ------------------
  /admin/users:
    get:
      tags: [Admin - Pengguna]
      summary: (Admin) Daftar semua akun admin
      security:
        - sanctum: []
      responses:
        "200":
          description: Daftar admin berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/User"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
    post:
      tags: [Admin - Pengguna]
      summary: (Admin) Buat akun admin baru
      security:
        - sanctum: []
      requestBody:
        $ref: "#/components/requestBodies/StoreUserBody"
      responses:
        "201":
          description: Akun admin berhasil dibuat.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserResponse"
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "403":
          $ref: "#/components/responses/ForbiddenError"
  /admin/users/{userId}:
    get:
      tags: [Admin - Pengguna]
      summary: (Admin) Lihat detail akun admin
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/UserId"
      responses:
        "200":
          description: Detail admin berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/User"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    put:
      tags: [Admin - Pengguna]
      summary: (Admin) Perbarui akun admin
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/UserId"
      requestBody:
        $ref: "#/components/requestBodies/UpdateUserBody"
      responses:
        "200":
          description: Akun admin berhasil diperbarui.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserResponse"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    delete:
      tags: [Admin - Pengguna]
      summary: (Admin) Hapus akun admin
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/UserId"
      responses:
        "200":
          $ref: "#/components/responses/SuccessMessage"
        "403":
          $ref: "#/components/responses/ForbiddenError"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  # ------------------ ADMIN: GALERI ------------------
  /admin/gallery-items:
    get:
      tags: [Admin - Galeri]
      summary: (Admin) Daftar semua item galeri
      security:
        - sanctum: []
      responses:
        "200":
          description: Daftar item galeri berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/GalleryItem"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags: [Admin - Galeri]
      summary: (Admin) Unggah item galeri baru
      security:
        - sanctum: []
      requestBody:
        $ref: "#/components/requestBodies/StoreGalleryItemBody"
      responses:
        "201":
          description: Item galeri berhasil dibuat.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GalleryItemResponse"
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
  /admin/gallery-items/{galleryItemId}:
    get:
      tags: [Admin - Galeri]
      summary: (Admin) Lihat detail item galeri
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/GalleryItemId"
      responses:
        "200":
          description: Detail item galeri berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/GalleryItem"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags: [Admin - Galeri]
      summary: (Admin) Perbarui item galeri
      description: Memperbarui data item galeri. Gunakan `_method`=`PUT` karena mendukung unggah file.
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/GalleryItemId"
      requestBody:
        $ref: "#/components/requestBodies/UpdateGalleryItemBody"
      responses:
        "200":
          description: Item galeri berhasil diperbarui.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GalleryItemResponse"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    delete:
      tags: [Admin - Galeri]
      summary: (Admin) Hapus item galeri
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/GalleryItemId"
      responses:
        "200":
          $ref: "#/components/responses/SuccessMessage"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  # ------------------ ADMIN: KATEGORI PRODUK ------------------
  /admin/product-categories:
    get:
      tags: [Admin - Kategori Produk]
      summary: (Admin) Daftar semua kategori produk
      security:
        - sanctum: []
      responses:
        "200":
          description: Daftar kategori berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/ProductCategory"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags: [Admin - Kategori Produk]
      summary: (Admin) Buat kategori produk baru
      security:
        - sanctum: []
      requestBody:
        $ref: "#/components/requestBodies/StoreProductCategoryBody"
      responses:
        "201":
          description: Kategori berhasil dibuat.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductCategoryResponse"
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
  /admin/product-categories/{productCategoryId}:
    get:
      tags: [Admin - Kategori Produk]
      summary: (Admin) Lihat detail kategori produk
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/ProductCategoryId"
      responses:
        "200":
          description: Detail kategori berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/ProductCategory"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags: [Admin - Kategori Produk]
      summary: (Admin) Perbarui kategori produk
      description: Memperbarui data kategori produk. Gunakan `_method`=`PUT` karena mendukung unggah file.
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/ProductCategoryId"
      requestBody:
        $ref: "#/components/requestBodies/UpdateProductCategoryBody"
      responses:
        "200":
          description: Kategori berhasil diperbarui.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductCategoryResponse"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    delete:
      tags: [Admin - Kategori Produk]
      summary: (Admin) Hapus kategori produk
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/ProductCategoryId"
      responses:
        "200":
          $ref: "#/components/responses/SuccessMessage"
        "409":
          description: Gagal menghapus karena kategori masih memiliki produk terkait.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GenericError"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  # ------------------ ADMIN: PRODUK ------------------
  /admin/products:
    get:
      tags: [Admin - Produk]
      summary: (Admin) Daftar semua produk
      security:
        - sanctum: []
      responses:
        "200":
          description: Daftar produk berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Product"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags: [Admin - Produk]
      summary: (Admin) Buat produk baru
      security:
        - sanctum: []
      requestBody:
        $ref: "#/components/requestBodies/StoreProductBody"
      responses:
        "201":
          description: Produk berhasil dibuat.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductResponse"
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
  /admin/products/{productId}:
    get:
      tags: [Admin - Produk]
      summary: (Admin) Lihat detail produk
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/ProductId"
      responses:
        "200":
          description: Detail produk berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/Product"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    put:
      tags: [Admin - Produk]
      summary: (Admin) Perbarui produk
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/ProductId"
      requestBody:
        $ref: "#/components/requestBodies/UpdateProductBody"
      responses:
        "200":
          description: Produk berhasil diperbarui.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductResponse"
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    delete:
      tags: [Admin - Produk]
      summary: (Admin) Hapus produk
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/ProductId"
      responses:
        "200":
          $ref: "#/components/responses/SuccessMessage"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  # ------------------ ADMIN: VARIAN PRODUK ------------------
  /admin/products/{productId}/variants:
    post:
      tags: [Admin - Varian Produk]
      summary: (Admin) Buat varian baru untuk produk
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/ProductId"
      requestBody:
        $ref: "#/components/requestBodies/StoreProductVariantBody"
      responses:
        "201":
          description: Varian berhasil dibuat.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductVariantResponse'
        "409":
          description: Gagal membuat karena kombinasi opsi sudah ada.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GenericError"
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
  /admin/variants/{variantId}:
    get:
      tags: [Admin - Varian Produk]
      summary: (Admin) Lihat detail varian
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/VariantId"
      responses:
        "200":
          description: Detail varian berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/ProductVariant'
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    put:
      tags: [Admin - Varian Produk]
      summary: (Admin) Perbarui varian
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/VariantId"
      requestBody:
        $ref: "#/components/requestBodies/UpdateProductVariantBody"
      responses:
        "200":
          description: Varian berhasil diperbarui.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductVariantResponse'
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    delete:
      tags: [Admin - Varian Produk]
      summary: (Admin) Hapus varian
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/VariantId"
      responses:
        "200":
          $ref: "#/components/responses/SuccessMessage"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  # ------------------ ADMIN: GAMBAR VARIAN ------------------
  /admin/variants/{variantId}/images:
    post:
      tags: [Admin - Gambar Varian]
      summary: (Admin) Unggah gambar untuk varian
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/VariantId"
      requestBody:
        $ref: "#/components/requestBodies/StoreProductImageBody"
      responses:
        "201":
          description: Gambar berhasil diunggah.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "3 gambar berhasil diunggah."
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/ProductImage"
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
  /admin/images/{imageId}:
    delete:
      tags: [Admin - Gambar Varian]
      summary: (Admin) Hapus gambar varian
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/ImageId"
      responses:
        "200":
          $ref: "#/components/responses/SuccessMessage"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  # ------------------ ADMIN: ITEM TAMBAHAN (ADD-ONS) ------------------
  /admin/add-ons:
    get:
      tags: [Admin - Item Tambahan]
      summary: (Admin) Daftar semua item tambahan
      security:
        - sanctum: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/AddOn'
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags: [Admin - Item Tambahan]
      summary: (Admin) Buat item tambahan baru
      security:
        - sanctum: []
      requestBody:
        $ref: "#/components/requestBodies/StoreAddOnBody"
      responses:
        "201":
          description: Item tambahan berhasil dibuat.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddOnResponse'
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
  /admin/add-ons/{addOnId}:
    get:
      tags: [Admin - Item Tambahan]
      summary: (Admin) Lihat detail item tambahan
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/AddOnId"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/AddOn'
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    put:
      tags: [Admin - Item Tambahan]
      summary: (Admin) Perbarui item tambahan
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/AddOnId"
      requestBody:
        $ref: "#/components/requestBodies/UpdateAddOnBody"
      responses:
        "200":
          description: Item tambahan berhasil diperbarui.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddOnResponse'
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    delete:
      tags: [Admin - Item Tambahan]
      summary: (Admin) Hapus item tambahan
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/AddOnId"
      responses:
        "200":
          $ref: "#/components/responses/SuccessMessage"
        "409":
          description: Gagal menghapus karena item tambahan masih terhubung dengan produk.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GenericError"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  # ------------------ ADMIN: ATRIBUT ------------------
  /admin/attributes:
    get:
      tags: [Admin - Atribut]
      summary: (Admin) Daftar semua atribut
      security:
        - sanctum: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Attribute'
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    post:
      tags: [Admin - Atribut]
      summary: (Admin) Buat atribut baru
      security:
        - sanctum: []
      requestBody:
        $ref: "#/components/requestBodies/StoreAttributeBody"
      responses:
        "201":
          description: Atribut berhasil dibuat.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AttributeResponse'
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
  /admin/attributes/{attributeId}:
    get:
      tags: [Admin - Atribut]
      summary: (Admin) Lihat detail atribut
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/AttributeId"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Attribute'
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    put:
      tags: [Admin - Atribut]
      summary: (Admin) Perbarui atribut
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/AttributeId"
      requestBody:
        $ref: "#/components/requestBodies/UpdateAttributeBody"
      responses:
        "200":
          description: Atribut berhasil diperbarui.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AttributeResponse'
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    delete:
      tags: [Admin - Atribut]
      summary: (Admin) Hapus atribut
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/AttributeId"
      responses:
        "200":
          $ref: "#/components/responses/SuccessMessage"
        "409":
          description: Gagal menghapus karena atribut masih memiliki nilai terkait.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GenericError"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  # ------------------ ADMIN: NILAI ATRIBUT ------------------
  /admin/attributes/{attributeId}/values:
    post:
      tags: [Admin - Nilai Atribut]
      summary: (Admin) Buat nilai untuk atribut
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/AttributeId"
      requestBody:
        $ref: "#/components/requestBodies/StoreAttributeValueBody"
      responses:
        "201":
          description: Nilai atribut berhasil dibuat.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AttributeValueResponse'
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
  /admin/values/{valueId}:
    put:
      tags: [Admin - Nilai Atribut]
      summary: (Admin) Perbarui nilai atribut
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/ValueId"
      requestBody:
        $ref: "#/components/requestBodies/UpdateAttributeValueBody"
      responses:
        "200":
          description: Nilai atribut berhasil diperbarui.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AttributeValueResponse'
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
    delete:
      tags: [Admin - Nilai Atribut]
      summary: (Admin) Hapus nilai atribut
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/ValueId"
      responses:
        "200":
          $ref: "#/components/responses/SuccessMessage"
        "409":
          description: Gagal menghapus karena nilai atribut masih digunakan oleh produk.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GenericError"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  # ------------------ ADMIN: TAUTAN ITEM TAMBAHAN ------------------
  /admin/products/{productId}/add-ons:
    post:
      tags: [Admin - Tautan Item Tambahan]
      summary: (Admin) Tautkan item tambahan ke produk
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/ProductId"
      requestBody:
        $ref: "#/components/requestBodies/StoreProductAddOnBody"
      responses:
        "200":
          $ref: "#/components/responses/SuccessMessage"
        "422":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
  /admin/products/{productId}/add-ons/{addOnId}:
    delete:
      tags: [Admin - Tautan Item Tambahan]
      summary: (Admin) Lepas tautan item tambahan dari produk
      security:
        - sanctum: []
      parameters:
        - $ref: "#/components/parameters/ProductId"
        - $ref: "#/components/parameters/AddOnId"
      responses:
        "200":
          $ref: "#/components/responses/SuccessMessage"
        "404":
          $ref: "#/components/responses/NotFoundError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

# ===============================================================
# COMPONENTS (BAGIAN YANG DAPAT DIGUNAKAN KEMBALI)
# ===============================================================
components:
  schemas:
    User:
      type: object
      properties:
        id: { type: integer, example: 1 }
        full_name: { type: string, example: "Administrator" }
        email: { type: string, format: email, example: "admin@example.com" }
        phone_number: { type: string, nullable: true, example: "081234567890" }
        role: { type: string, example: "admin" }
        created_at: { type: string, format: date-time, readOnly: true }
    UserResponse:
      type: object
      properties:
        message: { type: string, example: "Akun admin berhasil dibuat." }
        data: { $ref: "#/components/schemas/User" }
        
    GalleryItem:
      type: object
      properties:
        id: { type: integer, example: 1 }
        title: { type: string, nullable: true, example: "Portofolio Undangan" }
        description: { type: string, nullable: true }
        category: { type: string, nullable: true, example: "Undangan" }
        media_type: { type: string, enum: [image, video], example: "image" }
        file_url: { type: string, format: url, readOnly: true }
        product: { $ref: "#/components/schemas/Product" }
        created_at: { type: string, format: date-time, readOnly: true }
    GalleryItemResponse:
      type: object
      properties:
        message: { type: string, example: "Item galeri berhasil dibuat." }
        data: { $ref: "#/components/schemas/GalleryItem" }

    ProductCategory:
      type: object
      properties:
        id: { type: integer, example: 1 }
        name: { type: string, example: "Undangan Pernikahan" }
        slug: { type: string, example: "undangan-pernikahan", readOnly: true }
        description: { type: string, nullable: true }
        image_url: { type: string, format: url, nullable: true, readOnly: true }
        created_at: { type: string, format: date-time, readOnly: true }
    ProductCategoryResponse:
      type: object
      properties:
        message: { type: string, example: "Kategori produk berhasil dibuat." }
        data: { $ref: "#/components/schemas/ProductCategory" }

    Product:
      type: object
      properties:
        id: { type: integer, example: 1 }
        name: { type: string, example: "Undangan Digital Elegan" }
        description: { type: string, nullable: true }
        base_price: { type: integer, example: 5000 }
        min_order_quantity: { type: integer, example: 100 }
        is_active: { type: boolean, example: true }
        created_at: { type: string, format: date-time, readOnly: true }
        category: { $ref: "#/components/schemas/ProductCategory" }
        variants:
          type: array
          items:
            $ref: '#/components/schemas/ProductVariant'
    ProductResponse:
      type: object
      properties:
        message: { type: string, example: "Produk berhasil dibuat." }
        data: { $ref: "#/components/schemas/Product" }
    
    ProductVariant:
      type: object
      properties:
        id: { type: integer, example: 101 }
        sku: { type: string, nullable: true, example: "UND-ELEG-MERAH-M" }
        price: { type: integer, example: 5500 }
        stock: { type: integer, example: 50 }
        options:
          type: array
          items:
            $ref: '#/components/schemas/AttributeValue'
        images:
          type: array
          items:
            $ref: '#/components/schemas/ProductImage'
    ProductVariantResponse:
      type: object
      properties:
        message: { type: string, example: "Varian produk berhasil dibuat." }
        data: { $ref: "#/components/schemas/ProductVariant" }

    ProductImage:
      type: object
      properties:
        id: { type: integer, example: 1 }
        image_url: { type: string, format: url, readOnly: true }
        alt_text: { type: string, nullable: true }
        is_featured: { type: boolean }

    AddOn:
      type: object
      properties:
        id: { type: integer, example: 1 }
        name: { type: string, example: "Laminasi Doff" }
        price: { type: integer, example: 500 }
    AddOnResponse:
      type: object
      properties:
        message: { type: string, example: "Item tambahan berhasil dibuat." }
        data: { $ref: "#/components/schemas/AddOn" }

    Attribute:
      type: object
      properties:
        id: { type: integer, example: 1 }
        name: { type: string, example: "Ukuran" }
        values:
          type: array
          items:
            $ref: '#/components/schemas/AttributeValue'
    AttributeResponse:
      type: object
      properties:
        message: { type: string, example: "Atribut berhasil dibuat." }
        data: { $ref: "#/components/schemas/Attribute" }

    AttributeValue:
      type: object
      properties:
        id: { type: integer, example: 1 }
        value: { type: string, example: "A5" }
    AttributeValueResponse:
      type: object
      properties:
        message: { type: string, example: "Nilai atribut berhasil dibuat." }
        data: { $ref: "#/components/schemas/AttributeValue" }

    GenericError:
      type: object
      properties:
        message: { type: string, example: "Sumber daya tidak ditemukan." }
    ErrorValidation:
      type: object
      properties:
        message: { type: string, example: "The given data was invalid." }
        errors:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
              example: "Nama kategori wajib diisi."
    SuccessMessage:
      type: object
      properties:
        message: { type: string, example: "Operasi berhasil." }

  requestBodies:
    StoreUserBody:
      description: Data untuk membuat akun admin baru.
      required: true
      content:
        application/json:
          schema:
            type: object
            required: [full_name, email, password, password_confirmation]
            properties:
              full_name: { type: string, example: "John Doe" }
              email: { type: string, format: email, example: "johndoe@example.com" }
              password: { type: string, format: password, example: "password123" }
              password_confirmation: { type: string, format: password, example: "password123" }
              phone_number: { type: string, nullable: true, example: "08123456789" }
    UpdateUserBody:
      description: Data untuk memperbarui akun admin.
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              full_name: { type: string }
              email: { type: string, format: email }
              password: { type: string, format: password, nullable: true, description: "Isi hanya jika ingin mengubah password." }
              password_confirmation: { type: string, format: password }
              phone_number: { type: string, nullable: true }

    StoreGalleryItemBody:
      description: Data untuk item galeri baru.
      required: true
      content:
        multipart/form-data:
          schema:
            type: object
            required: [file]
            properties:
              product_id: { type: integer, nullable: true }
              title: { type: string, nullable: true }
              description: { type: string, nullable: true }
              category: { type: string, nullable: true }
              file: { type: string, format: binary, description: "File gambar atau video." }
    UpdateGalleryItemBody:
      description: Data untuk memperbarui item galeri.
      required: true
      content:
        multipart/form-data:
          schema:
            type: object
            required: [_method]
            properties:
              _method: { type: string, example: "PUT" }
              product_id: { type: integer, nullable: true }
              title: { type: string, nullable: true }
              description: { type: string, nullable: true }
              category: { type: string, nullable: true }
              file: { type: string, format: binary, nullable: true }

    StoreProductCategoryBody:
      description: Data untuk membuat kategori produk baru.
      required: true
      content:
        multipart/form-data:
          schema:
            type: object
            required: [name]
            properties:
              name: { type: string, example: "Buku Tamu" }
              description: { type: string, nullable: true }
              image: { type: string, format: binary, description: "File gambar opsional." }
    UpdateProductCategoryBody:
      description: "Data untuk memperbarui kategori. Gunakan 'POST' dengan `_method: 'PUT'` karena `multipart/form-data`."
      required: true
      content:
        multipart/form-data:
          schema:
            type: object
            required: [_method]
            properties:
              _method: { type: string, example: "PUT" }
              name: { type: string }
              description: { type: string, nullable: true }
              image: { type: string, format: binary, nullable: true }

    StoreProductBody:
      description: Data untuk produk baru.
      content:
        application/json:
          schema:
            type: object
            required: [category_id, name, base_price]
            properties:
              category_id: { type: integer, example: 1 }
              name: { type: string, example: "Undangan Klasik Elegan" }
              description: { type: string, nullable: true }
              base_price: { type: integer, example: 5000 }
              min_order_quantity: { type: integer, default: 100, example: 100 }
              is_active: { type: boolean, default: true, example: true }
    UpdateProductBody:
      description: Data untuk memperbarui produk.
      content:
        application/json:
          schema:
            type: object
            properties:
              category_id: { type: integer }
              name: { type: string }
              description: { type: string, nullable: true }
              base_price: { type: integer }
              min_order_quantity: { type: integer }
              is_active: { type: boolean }

    StoreProductVariantBody:
      description: Data untuk varian baru.
      content:
        application/json:
          schema:
            type: object
            required: [price, options]
            properties:
              price: { type: integer, example: 5500 }
              stock: { type: integer, example: 100 }
              sku: { type: string, nullable: true, example: "UND-ELEG-01" }
              options:
                type: array
                description: "Array berisi ID dari attribute_values."
                items:
                  type: integer
                example: [1, 5]
    UpdateProductVariantBody:
      description: Data untuk memperbarui varian.
      content:
        application/json:
          schema:
            type: object
            properties:
              price: { type: integer }
              stock: { type: integer }
              sku: { type: string, nullable: true }

    StoreProductImageBody:
      description: Unggah satu atau lebih gambar untuk sebuah varian.
      content:
        multipart/form-data:
          schema:
            type: object
            required: [images]
            properties:
              images:
                type: array
                items:
                  type: string
                  format: binary
              alt_texts:
                type: array
                nullable: true
                items:
                  type: string
              is_featured:
                type: boolean
                description: "Tandai apakah gambar ini akan menjadi gambar utama varian."
                
    StoreAddOnBody:
      description: Data untuk item tambahan baru.
      content:
        application/json:
          schema:
            type: object
            required: [name, price]
            properties:
              name: { type: string, example: "Amplop Fancy" }
              price: { type: integer, example: 1200 }
    UpdateAddOnBody:
      description: Data untuk memperbarui item tambahan.
      content:
        application/json:
          schema:
            type: object
            properties:
              name: { type: string }
              price: { type: integer }

    StoreAttributeBody:
      description: Data untuk atribut baru.
      content:
        application/json:
          schema:
            type: object
            required: [name]
            properties:
              name: { type: string, example: "Jenis Kertas" }
    UpdateAttributeBody:
      description: Data untuk memperbarui atribut.
      content:
        application/json:
          schema:
            type: object
            properties:
              name: { type: string }

    StoreAttributeValueBody:
      description: Data untuk nilai atribut baru.
      content:
        application/json:
          schema:
            type: object
            required: [value]
            properties:
              value: { type: string, example: "Jasmine 200gsm" }
    UpdateAttributeValueBody:
      description: Data untuk memperbarui nilai atribut.
      content:
        application/json:
          schema:
            type: object
            properties:
              value: { type: string }

    StoreProductAddOnBody:
      description: Data untuk menautkan item tambahan ke produk.
      content:
        application/json:
          schema:
            type: object
            required: [add_on_id]
            properties:
              add_on_id: { type: integer, example: 3 }

  parameters:
    UserId:
      name: userId
      in: path
      required: true
      description: ID numerik dari pengguna.
      schema:
        type: integer
    GalleryItemId:
      name: galleryItemId
      in: path
      required: true
      description: ID dari item galeri.
      schema:
        type: integer
    ProductCategoryId:
      name: productCategoryId
      in: path
      required: true
      description: ID numerik dari kategori produk.
      schema:
        type: integer
    ProductId:
      name: productId
      in: path
      required: true
      description: ID dari produk.
      schema: { type: integer }
    VariantId:
      name: variantId
      in: path
      required: true
      description: ID dari varian produk.
      schema: { type: integer }
    ImageId:
      name: imageId
      in: path
      required: true
      description: ID dari gambar produk/varian.
      schema: { type: integer }
    AddOnId:
      name: addOnId
      in: path
      required: true
      description: ID dari item tambahan.
      schema: { type: integer }
    AttributeId:
      name: attributeId
      in: path
      required: true
      description: ID dari atribut.
      schema: { type: integer }
    ValueId:
      name: valueId
      in: path
      required: true
      description: ID dari nilai atribut.
      schema: { type: integer }

  responses:
    NotFoundError:
      description: Sumber daya tidak ditemukan.
      content:
        application/json:
          schema: { $ref: "#/components/schemas/GenericError" }
    UnauthorizedError:
      description: Autentikasi gagal.
      content:
        application/json:
          schema: { $ref: "#/components/schemas/GenericError" }
    ForbiddenError:
      description: Tidak memiliki izin akses.
      content:
        application/json:
          schema: { $ref: "#/components/schemas/GenericError" }
    ValidationError:
      description: Data yang diberikan tidak valid.
      content:
        application/json:
          schema: { $ref: "#/components/schemas/ErrorValidation" }
    SuccessMessage:
      description: Operasi berhasil.
      content:
        application/json:
          schema: { $ref: "#/components/schemas/SuccessMessage" }

  securitySchemes:
    sanctum:
      type: http
      scheme: bearer
      description: "Masukkan token Bearer Anda. Contoh: 'Bearer 1|abcdef...'"
